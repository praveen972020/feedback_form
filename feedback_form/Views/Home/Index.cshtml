@{
    ViewBag.Title = "Home Page";
}
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.2/angular.min.js"></script>
<script src="~/Scripts/angular.min.js"></script>
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/frontEnd/plugins/bootstrap/js/bootstrap.min.js"></script>
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<style>
    .a {
        text-align: center;
        width: 120px;
    }

    .Setheight {
        height: 36px;
    }

    .sett {
        height: 10px;
    }

    .tp {
       
    }

    .tp1 {
       
    }

    .icon {
        border: transparent;
        background: transparent;
    }
</style>
<div class="content" ng-controller="HomeCtrl" ng-app="MyApp" ng-cloak>


    <!--<div class="card card-success">
        <div class="card-header card-title Setheight" style="padding:6px 20px;">
            <div class="row">
                <div class="col-md-6"> <h6 class="card-title">Add Question</h6></div>
                <div class="card-tools col-md-6 text-right">
                    <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-remove"></i></button>
                </div>-->
    @*<div class="col-md-6"><button class="float-right bg-transparent text-white" onclick="show_question_pannel();">Add Question</button></div>*@
    <!--</div>
    </div>
    <div class="card-body" id="open_pannel" style="padding-top:2px;">
        <form action="/" method="post">
            <div class="row" style="padding:0px 10px;">
                <div class="card-body" style="padding:6px;">
                    <div class="row">
                        <div class="col-md-4">
                            <label for="select_category">Select a category:</label>
                            <select id="select_category" ng-model="select_category" name="select_category" onchange="showDropdown()" class="form-control">
                                <option value="">--Please choose an option--</option>
                                <option value="Academic">Academic</option>
                                <option value="Hostel">Hostel</option>
                            </select>
                        </div>
                        <div id="course-dropdown" class="col-md-4" onchange="showpannel();" style="display:none;">
                            <label for="select_course">Select a course:</label>
                            <select id="select_course" ng-model="select_course" name="select_course" onchange="showbranch()" class="form-control">
                                <option value="">--Please choose an option--</option>
                                <option value="All">ALL Course</option>
                                <option value="B.TECH">B.tech</option>
                                <option value="BCA">BCA</option>
                                <option value="MCA">MCA</option>
                                <option value="MBA">MBA</option>
                            </select>
                        </div>
                        <div id="branch-dropdown" class="col-md-4" ng-show="select_course=='B.TECH'" style="display:none">
                            <label for="select-branch">Select a Branch:</label>
                            <select id="select-branch" ng-model="select_branch" name="select_branch" class="form-control" onchange="bybranch();">
                                <option value="">--Please choose an option--</option>
                                <option value="All">ALL Branch</option>
                                <option value="CSE">CSE</option>
                                <option value="EC">EC</option>
                                <option value="EE">EE</option>
                                <option value="ME">ME</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row" style="padding:0px 10px;">
                <div class="card-body" id="question-pannel" style="display:none; padding:0px 6px; 0px; 0px;">
                    <div class="row" style="padding:0px;">
                        <div class="col-md-4">
                            <label>Session:</label>-->
    @*<input type="text" id="session" name="session" value="2022-23" ng-model="session" class="form-control" />*@
    <!--<select id="session" ng-model="session" name="session" class="form-control">
                <option value="2022-23" selected>2022-23</option>
                <option value="2023-24">2023-24</option>
            </select>

        </div>

        <div class="col-md-4">
            <label> Answer Type:</label>
            <select id="question-type" name="q_type" ng-model="q_type" onchange="selecttype()" class="form-control">
                <option value="">--Please choose an option--</option>
                <option value="Text">Text</option>
                <option value="Rating">Rating</option>
            </select>
        </div>
        <div class="col-md-4" id="select-rating" style="display:none;">
            <label>Select Rating:</label>
            <select id="rating" ng-model="rating" name="rating" class="form-control">
                <option value="">--Please choose an option--</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
                <option value="4">Four</option>
                <option value="5">Five</option>
            </select>
        </div>
    </div>
    <div class="row" style="">
        <div class="col-md-8" style="">
            <label>Mention Question:</label>
            <textarea class="form-control" id="Mention_question" ng-model="Mention_question" name="Mention_question" rows="3" placeholder="Mention Question"></textarea>
        </div>
        <div class="col-md-4 text-right">
            <br /><br /><br />-->
    @*<input type="submit" class="btn btn-primary " />*@
    <!--<button type="button" class="btn btn-primary" ng-click="addItem()">Add Question</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>-->
    <!--<div class="card card-primary" id="question_table" style="display:none">-->
    @*<div class="card-header">
            <div class="row">
                <div class="col-md-6"> <h6 class="card-title">Your Question</h6></div>
            </div>
        </div>*@
    <!--<div class="card-body">
        <table class="table table-bordered">
            <thead>
                <tr>
                <tr style="height:1px; padding:0px;">-->
    @*<th style="width: 10px">#</th>*@
    <!--<th style="width:110px;text-align:center;" class="bg-info" align="center">Catagery</th>
    <th style="width:60px" align="center" class="bg-info">Course</th>

    <th style="width:60px" class="bg-info">Branch</th>
    <th style="width:110px;text-align:center" class="bg-info">Session</th>
    <th style="width:130px" class="bg-info">Mention Type</th>
    <th style="width:40px" class="bg-info">Rating</th>
    <th style="text-align:center" class="bg-info">Question</th>-->
    @*<th>Display By</th>*@
    @*<th style="width: 40px">Label</th>*@
    <!--</tr>
    </thead>
    <tbody>
    <tbody>
        <tr ng-repeat="item in items">
            <td style="padding:6px;">{{ item.category }}</td>
            <td style="padding:6px;">{{ item.hostelorcourse }}</td>
            <td style="padding:6px;">{{ item.branch }}</td>
            <td style="padding:6px;">{{item.session}}</td>
            <td style="padding:6px;">{{item.q_type}}</td>
            <td style="padding:6px;">{{item.rating}}</td>
            <td style="padding:6px;">{{item.question}}</td>-->
    @*<td><input type="text" id="display_by" name="display_by" ng-model="display_by"  placeholder="enter sequence" /></td>*@

    <!--</tr>
            </tbody>
            </tbody>
        </table>
    </div>-->
    @*<div class="card-footer text-right" id="abc1" style="display:none;">
            <button type="submit" class="btn btn-primary" ng-click="insert()">Submit</button>
        </div>*@
    <!--<div class="card-footer text-right" id="abc1">
            <button type="submit" class="btn btn-primary" ng-click="insert()">Submit</button>
        </div>
    </div>-->

    <div class="card card-success">
        <div class="card-header Setheight" style="padding:6px 20px;">
            <div class="row">
                <div class="col-md-6"> <h3 class="card-title">Update Question Sequence</h3></div>
                <div class="card-tools col-md-6 text-right">
                    <button type="button" class="btn btn-tool" ng-click="addq();"><i class="fa fa-plus"></i></button>
                    @*<button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-remove"></i></button>*@
                </div>
                @*<div class="col-md-6"><button class="float-right border-transparent bg-transparent text-white" onclick="show_question_pannel1();">Update</button></div>*@
            </div>
        </div>
        <div class="card-body" id="open_pannel1" style="padding-top:10px;">
            <div>
                <div class="row">
                    <div class="col-md-4">
                        <label for="select_category">Select a category:</label>
                        <select id="select_category1" ng-model="select_category1" name="select_category1" onchange="showDropdown1()" class="form-select">
                            <option value="" disabled>--Please choose an option--</option>
                            <option value="Academic" selected>Academic</option>
                            <option value="Hostel">Hostel</option>
                        </select>
                    </div>
                    <div id="course-dropdown1" class="col-md-4" style="">
                        <label for="select_course">Select a course:</label>
                        <select id="select_course1" ng-model="select_course1" name="select_course1" onchange="showbranch1()" class="form-select">
                            <option value="" disabled>--Please choose an option--</option>
                            @*<option value="ALL">ALL Course</option>*@
                            <option value="MCA" selected>MCA</option>
                            <option value="B.TECH">B.tech</option>
                            <option value="BCA">BCA</option>

                            <option value="MBA">MBA</option>
                        </select>
                    </div>
                    <div id="branch-dropdown1" class="col-md-4" style="">
                        <label for="select-branch">Select a Branch:</label>
                        <select id="select_branch1" ng-model="select_branch1" name="select_branch1" class="form-select">
                            <option value="">--Please choose an option--</option>
                            @*<option value="ALL">ALL Branch</option>
                                <option value="CSE">CSE</option>
                                <option value="EC">EC</option>
                                <option value="EE">EE</option>
                                <option value="ME">ME</option>*@
                        </select>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-12 text-center">
                        <br />
                        @*<input type="submit" class="btn btn-primary " />*@
                        <button type="button" class="btn btn-primary" ng-click="showquestion()">Search</button>
                    </div>
                </div>
                <div id="fetch_table" style="display:none">
                    <table class="table table-bordered">
                        <br />

                        <thead style=""class="table-success">
                            <tr style="height:1px; padding:0px;">
                                @*<th style="width: 10px">#</th>*@
                                <th class="" style="width:15px; height:0px;"><input type="checkbox" name="" ng-model="item.isSelected" id="selectall" /></th>
                                <th class="" style="width:110px;text-align:center">Catagery</th>
                                <th class="" style="width:60px" align="center">Course</th>
                                <th class="" style="width:40px">Branch</th>
                                <th class="" style="width:90px;text-align:center">Session</th>
                                <th class="" width="105px">Que. Type</th>
                                <th class="" width="70px">Rating</th>
                                <th class="" style="text-align:center">Question</th>
                                <th class="" style="width:20px">SEQ</th>
                                <th class="" style="width:2px"><i class="fa fa-trash"></i></th>
                                @*<th>Update</th>*@
                            </tr>
                        </thead>
                        <tbody>
                        <tbody>
                            <tr ng-repeat="item in AllRecord">
                                <td style="text-align:center; height:1px; padding:6px;">
                                    <input type="checkbox" id="check{{$index}}" ng-model=" item.isSelected" *ngIf="item.display_by > 0" ng-click="updateSelectedItems(item.id,$index)">
                                </td>
                                <input type="checkbox" name="" ng-model="item.isSelected" style="display:none;" />
                                <td style="padding:0px; display:none;"><input type="text" style="width:60px; display:none;" class="form-control" id="id{{$index}}" name="id" ng-model="item.id" /></td>
                                <td style="padding:6px;text-align:center;">{{ item.category }}</td>
                                <td style="padding:6px;text-align:center;">{{ item.hostelorcourse }}</td>
                                <td style="padding:6px;text-align:center;">{{ item.branch }}</td>
                                <td style="padding:6px;text-align:center;">{{item.session}}</td>
                                <td style="padding:6px;text-align:center;">{{item.q_type}}</td>
                                <td style="padding:6px;text-align:center;">{{item.rating}}</td>
                                <td style="padding:6px;text-align:center">{{item.question}}</td>
                                @*<td>{{item.display_by}}</td>*@
                                <td style="padding:0px;"><input type="text" style="width:60px;background-color:white;padding:0px;text-align:center" class="form-control tp" id="display_by_{{$index}}" ng-disabled="!item.isSelected" name="display_by" ng-model="item.display_by" placeholder="seq." required /></td>
                                @*<td><button ng-click="updatemyFun(item.id,$index)">Update</button></td>*@
                                <td style="width:2px;padding:0px;text-align:center"><button class="icon" type="button" ng-click="delete($index);"><i class="fa fa-trash text-danger" ></i></button></td>
                            </tr>
                        </tbody>
                        </tbody>
                    </table>
                    <div class=" text-right" id="abc" style="display:none">
                        @*<button type="submit" class="btn btn-primary" ng-click="delete()">Delete</button>*@
                        <button type="submit" class="btn btn-primary" ng-click="update()">Update</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modal-xl">
        <div class="modal-dialog modal-xl">
            <div class="modal-content card-success">
                <div class="card card-success" style="">
                    <div class="card-header card-title Setheight" style="padding:6px 20px;">
                        <div class="row">
                            <div class="col-md-6"> <h6 class="card-title">Add Question</h6></div>
                            <div class="card-tools col-md-6 text-right">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                @*<button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-cross"></i></button>
                                    <button type="button" class="btn btn-tool" data-card-widget="remove"><i class="fas fa-remove"></i></button>*@
                            </div>
                            @*<div class="col-md-6"><button class="float-right bg-transparent text-white" onclick="show_question_pannel();">Add Question</button></div>*@
                        </div>
                    </div>
                    <div class="card-body" id="open_pannel" style="padding-top:2px;">
                        <form action="/" method="post">
                            <div class="row" style="padding:0px 10px;">
                                <div class="card-body" style="padding:6px;">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <label for="select_category">Select a category:</label>
                                            <select id="select_category" ng-model="select_category" name="select_category" onchange="showDropdown()" class="form-select">
                                                <option value="">--Please choose an option--</option>
                                                <option value="Academic">Academic</option>
                                                <option value="Hostel">Hostel</option>
                                            </select>
                                        </div>
                                        <div id="course-dropdown" class="col-md-4" onchange="showpannel();" style="">
                                            <label for="select_course">Select a course:</label>
                                            <select id="select_course" ng-model="select_course" name="select_course" onchange="showbranch()" class="form-select">
                                                <option value="">--Please choose an option--</option>
                                                @*<option value="All">ALL Course</option>
                                                    <option value="B.TECH">B.tech</option>
                                                    <option value="BCA">BCA</option>
                                                    <option value="MCA">MCA</option>
                                                    <option value="MBA">MBA</option>*@
                                            </select>
                                        </div>
                                        <div id="branch-dropdown" class="col-md-4" @*ng-show="select_course=='B.TECH'"*@ style="">
                                            <label for="select-branch">Select a Branch:</label>
                                            <select id="select-branch" ng-model="select_branch" name="select_branch" class="form-select" onchange="bybranch();">
                                                <option value="">--Please choose an option--</option>
                                                @*<option value="All">ALL Branch</option>
                                                    <option value="CSE">CSE</option>
                                                    <option value="EC">EC</option>
                                                    <option value="EE">EE</option>
                                                    <option value="ME">ME</option>*@
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="padding:0px 10px;">
                                <div class="card-body" id="question-pannel" style=" padding:0px 6px; 0px; 0px;">
                                    <div class="row" style="padding:0px;">
                                        <div class="col-md-4">
                                            <label>Session:</label>
                                            @*<input type="text" id="session" name="session" value="2022-23" ng-model="session" class="form-control" />*@
                                        <select id="session" ng-model="session" name="session" class="form-select">
                                            <option value="">--Please choose an option--</option>
                                            <option value="2022-23" selected>2022-23</option>
                                            <option value="2023-24">2023-24</option>
                                        </select>
                                        </div>
                                        <div class="col-md-4">
                                            <label> Answer Type:</label>
                                            <select id="question-type" name="q_type" ng-model="q_type" onchange="selecttype()" class="form-select">
                                                <option value="">--Please choose an option--</option>
                                                <option value="Text">Text</option>
                                                <option value="Rating">Rating</option>
                                            </select>
                                        </div>
                                        <div class="col-md-4" id="select-rating" style="">
                                            <label>Select Rating:</label>
                                            <select id="rating" ng-model="rating" name="rating" class="form-select">
                                                <option value="">--Please choose an option--</option>
                                                @*<option value="1">One</option>
                                                    <option value="2">Two</option>
                                                    <option value="3">Three</option>
                                                    <option value="4">Four</option>
                                                    <option value="5">Five</option>*@
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row" style="">
                                        <div class="col-md-8" style="">
                                            <label>Mention Question:</label>
                                            <textarea class="form-control" id="Mention_question" ng-model="Mention_question" name="Mention_question" rows="3" placeholder="Mention Question"></textarea>
                                        </div>
                                        <div class="col-md-4 text-right">
                                            <br /><br /><br />
                                            @*<input type="submit" class="btn btn-primary " />*@
                                            <button type="button" class="btn btn-primary" ng-click="addItem()">Add</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    @*</div>*@


                    @*<div class="card card-primary" id="question_table" style="display:none">*@
                    @*<div class="card-header">
                            <div class="row">
                                <div class="col-md-6"> <h6 class="card-title">Your Question</h6></div>
                            </div>
                        </div>*@
                    <div class="card-body" id="question_table" style="display:none">
                        <table class="table table-bordered ">
                            <thead class="table-success">
                                <tr>
                                <tr style="height:1px; padding:0px;">
                                    @*<th style="width: 10px">#</th>*@
                                    <th style="width:110px;text-align:center;" class="" align="center">Catagery</th>
                                    <th style="width:60px" align="center" class="">Course</th>

                                    <th style="width:60px" class="">Branch</th>
                                    <th style="width:110px;text-align:center" class="">Session</th>
                                    <th style="width:130px" class="">Mention Type</th>
                                    <th style="width:40px" class="">Rating</th>
                                    <th style="text-align:center" class="">Question</th>

                                    
                                </tr>
                            </thead>
                            <tbody>
                            <tbody>
                                <tr ng-repeat="item in items">
                                    <td style="padding:6px;">{{ item.category }}</td>
                                    <td style="padding:6px;">{{ item.hostelorcourse }}</td>
                                    <td style="padding:6px;">{{ item.branch }}</td>
                                    <td style="padding:6px; text-align:center;">{{item.session}}</td>
                                    <td style="padding:6px;">{{item.q_type}}</td>
                                    <td style="padding:6px; text-align:center;">{{item.rating}}</td>
                                    <td style="padding:6px;">{{item.question}}</td>
                                    @*<td><input type="text" id="display_by" name="display_by" ng-model="display_by"  placeholder="enter sequence" /></td>*@

                                </tr>
                            </tbody>
                            </tbody>
                        </table>
                        <div class="card-footer text-right" id="abc1">
                            <button type="submit" class="btn btn-primary" ng-click="insert()">Submit</button>
                        </div>
                    </div>
                    @*<div class="card-footer text-right" id="abc1" style="display:none;">
                            <button type="submit" class="btn btn-primary" ng-click="insert()">Submit</button>
                        </div>*@

                </div>

            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>


</div>





<script type="text/javascript">
    var app = angular.module('MyApp', []);
    app.controller('HomeCtrl', function ($scope, $window, myService, $timeout) {

        $scope.addq = function () {

            $("#modal-xl").modal('show');
        }

        $scope.ch = function () {
            if ($('#select_category').val() == 'Hostel') {

                document.getElementById("select_course").disabled = true;
                document.getElementById("select_branch").disabled = true;
            }
        }

        $scope.items = [];
        $scope.session = '2022-23';
      
        $scope.addItem = function () {

            if ($scope.select_branch == '' || $scope.select_branch == undefined || $scope.select_branch == null) {
                $scope.select_branch = "";
            }

            session = document.getElementById("session").value;
            q_type = document.getElementById("question-type").value;
            cours = $scope.select_course;
            branc = $scope.select_branch;
            //alert($('#select_category').val());
           // cat = document.getElementById("select-category").value;
           // aler(cat);
            //  alert('called');
            rating = document.getElementById("rating").value;
            Mention_question = document.getElementById("Mention_question").value;
            if ($('#select_category').val() == '' || $('#select_category').val() == null || $('#select_category').val() == undefined) {
                return alert('Please Select Category');
            }
            

            if ($('#select_category').val() == 'Academic')
             {
               
                Mention_question = document.getElementById("Mention_question").value;
                if ($scope.session == undefined || $scope.session == '' || $scope.session == 'null' || $scope.q_type == undefined || $scope.Mention_question == undefined || $scope.Mention_question == '' || $scope.Mention_question == 'null' || $scope.q_type == '' || $scope.q_type == 'null' || $scope.select_course == undefined || $scope.select_course == 'Please Choose An Option') {
                    return alert('Please fill All Field');
                }
                else {
                    if ($scope.q_type == 'Rating') {
                        if ($scope.rating == undefined || $scope.rating == '' || $scope.rating == 'Select Rating') {
                            return alert('Please Select Rating Atleast One');
                        }
                    }
                    if ($scope.select_course == 'B.TECH') {
                        if ($scope.select_branch == '' || $scope.select_branch == undefined || $scope.select_branch == 'Please Choose An Option') {
                            return alert('Please Select Any Branch');
                        }

                    }
                }
            }
            if ($('#select_category').val() == 'Hostel') {
                Mention_question = document.getElementById("Mention_question").value;
                if ($scope.session == undefined || $scope.session == '' || $scope.session == 'null' || $scope.q_type == undefined || $scope.Mention_question == undefined || $scope.Mention_question == '' || $scope.Mention_question == 'null' || $scope.q_type == '' || $scope.q_type == 'null' ) {
                    return alert('Please fill All Field');
                }
                else {
                    if ($scope.q_type == 'Rating') {
                        if ($scope.rating == undefined || $scope.rating == '' || $scope.rating == 'Select Rating') {
                            return alert('Please Select Rating Atleast One');
                        }
                    }
                    
                }

            }
            for (var i = 0; i < $scope.items.length; i++) {
                // alert($scope.items[i].question);
                $scope.sm1 = $scope.items[i].question.split(' ').join('');
                $scope.sm2 = $scope.Mention_question.split(' ').join('');

                //   angular.lowercase($scope.sm1)
                /* alert($scope.sm1);*/
                if ($scope.sm1.toUpperCase() == $scope.sm2.toUpperCase()) {
                    $scope.Mention_question = '';
                    return alert('This Question Already Exists');
                }
                //    $scope.ques = $scope.items[i];
                //    alert($scope.ques)
                //    if ($scope.ques == Mention_question) {
                //        alert('under if');
                //        return alert('Question Already Exists');
                //    }
            }
            $scope.items.push({
                category: $scope.select_category,
                hostelorcourse: $scope.select_course,
                hostel: $scope.select_hostel,
                q_type: $scope.q_type,
                branch: $scope.select_branch,
                question: $scope.Mention_question,
                rating: $scope.rating,
                session: $scope.session

            });
            //alert($scope.items.length);
            // Clear form fields after adding item
            // $scope.select_course = '';
            $scope.category = "";
            $scope.hostelorcourse = "";
            $scope.branch = undefined;
            $scope.select_branch = '';
            $scope.q_type = '';
            $scope.Mention_question = '';
            $scope.rating = '';
            $scope.abc = '';
            $scope.select_hostel = '';
            Mention_question = '';

            if ($scope.items.length != 0) {
                document.getElementById("question_table").style.display = "block";
            }
        };
        $scope.insert = function () {
            if ($scope.items.length == 0) {
                return alert('Please Add Atleast One Question');
            }
            // alert('insert function are called');

            var user = $scope.items;
            console.log(user);
            myService.UserLogin("/Home/insertQuestion", user).then(function (d) {

                console.log(d.data);
                alert(d.data);
            });
            
            location.reload();
            // alert('Insert Successfully');
        }
        $scope.select_category1 = 'Academic';
        $scope.select_course1 = 'MCA';
        document.getElementById("select_branch1").disabled = true;
       // $('#select_course1').val()="MCA";
        $scope.showquestion = function () {
            $scope.selectedItems = [];
          //  $scope.cat = document.getElementById("select_category1").value;
           // document.getElementById("fetch_table").style.display = "block";
            $scope.cat = $('#select_category1').val();
            
          //  $scope.cou = document.getElementById("select_course1").value;
            $scope.cou = $('#select_course1').val();
            
           $scope.bran = document.getElementById("select_branch1").value;
            // alert(cat);
            if ($scope.cat=''|| $scope.cat == undefined || $scope.cat == null) {
                alert($scope.cat);
                return alert('Please select Categery');
            }
            else {
                if ($scope.cat == 'academic') {
                    if ($scope.cou == '' || $scope.cou == undefined || $scope.cou == null) {
                        return alert('Please Select Course');
                    }
                    else {
                        if ($scope.cou == 'B.TECH') {
                            if ($scope.bran == '' || $scope.bran == undefined || $scope.bran == null) {
                                return alert('Please Select Any Branch');
                            }
                        }
                    }
                }
            }

            document.getElementById("abc").style.display = "none";
            var user = { category: $('#select_category1').val(), course: $('#select_course1').val(), branch: $('#select_branch1').val(), hostel: $('#select_hostel1').val() };
            myService.UserLogin("/Home/Search", user).then(function (d) {
                $scope.AllRecord = d.data.list1;
                console.log($scope.AllRecord);
                document.getElementById("fetch_table").style.display = "block";
                //console.log(d.data);
                //alert(d.data);
            });
            //$scope.select_branch1 = '';
            // $scope.select_course1 = '';
            // $scope.select_category1 = '';
            $scope.select_hostel1 = '';
        }
        $scope.showquestion();
        //$scope.fetchRecord = function () {
        //    myService.UserLogin("/Home/FetchRecord").then(function (d) {
        //        $scope.AllRecord = d.data.list1;
        //        $scope.templist = angular.copy($scope.AllRecord);

        //        console.log($scope.AllRecord);
        //    });
        //}
        //$scope.fetchRecord();
        // $scope.selectedItems = [];
        $scope.selectedItems = [];
        $scope.updateSelectedItems = function (id, ind) {

            $scope.getTemp1 = '';
            $scope.getTemp = $("#display_by_" + ind).val();
            $scope.getTemp1 = $scope.getTemp;
            $scope.id1 = id;

            //if ($scope.getTemp1 == null || $scope.getTemp1 == undefined || $scope.getTemp1 == '') {
            //    $("#check" + ind).prop("checked", false)
            //    return alert('Please Enter Sequence');
            //}

            //for (var i = 0; i < $scope.selectedItems.length; i++) {
            //    if ($scope.selectedItems[i].display_by == $scope.getTemp) {
            //       // $scope.getTemp = '';
            //        $("#check" + ind).prop("checked", false)
            //        return alert('This Sequence Already Exists At ' + ind + ' Index');
            //    }
            //}
            $scope.selectedItems.push({
                id: $scope.id1,
                display_by: $scope.getTemp,
            });

            //angular.forEach($scope.items, function (item) {
            //    if (item.isSelected) {
            //        $scope.selectedItems.push(item);
            //    }
            //});
            //alert($scope.selectedItems.length);
            if ($scope.selectedItems.length != 0) {
                //  alert($scope.selectedItems.length);
                document.getElementById("abc").style.display = "block";
            }
        };
        $scope.update = function () {

            $scope.fine = [];
            for (var i = 0; i < $scope.AllRecord.length; i++) {
                $scope.id1 = $("#id" + i).val();
                $scope.display1 = $("#display_by_" + i).val();
                if ($scope.display1 == null || $scope.display1 == undefined || $scope.display1 == '') {
                    // $("#check" + ind).prop("checked", false)
                    return alert('Please Enter Sequence');
                }
                for (var j = 0; j < $scope.fine.length; j++) {
                    if ($scope.fine[j].display_by == $scope.display1) {
                        $scope.fine = [];

                        return alert('One or More Sequence Already Exists ');
                    }
                }

                $scope.fine.push({
                    id: $scope.id1,
                    display_by: $scope.display1,
                });
            }
            $scope.display1 = '';
            $scope.id1 = '';
            var user = $scope.fine;
            //  alert('update function are called');
            console.log(user);
            if (window.confirm('Are sure you want to upadte this item?')) {
                myService.UserLogin("/Home/update", user).then(function (d) {
                    console.log(d.data);
                    alert(d.data);
                    location.reload();
                   // $scope.showquestion();
                });
            }
            
            //alert('Updated Successfully');
        }
        
        

        $scope.delete = function (ind) {
            var user = { id: $("#id" + ind).val() };
            console.log(user);
            if (window.confirm('Are sure you want to delete this item ?')) {
                myService.UserLogin("/Home/delete", user).then(function (d) {
                    console.log(d.data);
                    $scope.showquestion();
                    alert(d.data);
                   
                });
                

               

            }
            
            // alert($("#id" + ind).val());
            //alert('Delete function are called');
            
           
        }


        $scope.updatemyFun = function (id, ind) {
            $scope.getTemp = $("#display_by_" + ind).val();
            var user = { id: id, display_by: $scope.getTemp };
            myService.UserLogin("/Home/UpdateFun", user).then(function (d) {
                alert(d.data);
                $("#display_by").val("");

            });


        }

    });
    app.service("myService", function ($http) {
        this.UserLogin = function (Path, user) {
            var response = $http({
                method: "post",
                url: Path,
                data: JSON.stringify(user),
                dataType: "json"
            });
            return response;
        }
    });
</script>
<script>

    $('#selectall').click(function ()
    {

        if ($(this).is(':checked'))
        {
            $('input:checkbox').prop('checked', true);
            $('input:text').prop('disabled', false);
            document.getElementById("abc").style.display = "block";
        }
        else
        {
            $('input:checkbox').prop('checked', false);
            $('input:text').prop('disabled', true);
            document.getElementById("abc").style.display = "none";
        }
    });

    var statesByCountry =
    {
        Academic: [/*'All',*/  'MCA', 'B.TECH', 'BCA', 'MBA'],
        Hostel: []

    };

    $('#select_category').change(function ()
    {

        var country = $(this).val();
        if (country == 'Hostel') {

            document.getElementById("select_course").disabled = true;
            document.getElementById("select-branch").disabled = true;
        }
        if (country == 'Academic') {

            document.getElementById("select_course").disabled = false;
            document.getElementById("select-branch").disabled = false;
        }

           
        var course = statesByCountry[country];
        $('#select_course').empty();
        $('#select-branch').empty();

        if (course)
        {
            $('#select_course').append($('<option>').text('Please Choose An Option'));
            $.each(course, function (index, value) {
                $('#select_course').append($('<option>').text(value).attr('value', value));
            });
        }
    });
    var branch =
    {
        'B.TECH': [/*'All',*/ 'CSE', 'ME', 'EE', 'EC'],
        //All: [],
        MCA: [],

        BCA: [],
        MBA: [],

    };

    $('#select_course').change(function ()
    {

        var course = $(this).val();
        if (course != 'B.TECH') {
            document.getElementById("select-branch").disabled = true;
        }
        else {
            document.getElementById("select-branch").disabled = false;
        }
        var bran = branch[course];
        $('#select-branch').empty();

        if (bran)
        {
            $('#select-branch').append($('<option>').text('Please Choose An Option'));
            $.each(bran, function (index, value) {
                $('#select-branch').append($('<option>').text(value).attr('value', value));
            });
        }
    });

    var statesByCountry1 =
    {
        Academic: [/*'All',*/ 'B.TECH', 'MCA', 'BCA', 'MBA'],
        Hostel: []

    };

    $('#select_category1').change(function ()
    {
       
    

        var cat4 = $(this).val();
        if (cat4 == 'Hostel') {

            document.getElementById("select_course1").disabled = true;
            document.getElementById("select_branch1").disabled = true;
        }
        if (cat4 == 'Academic') {

            document.getElementById("select_course1").disabled = false;
            document.getElementById("select_branch1").disabled = false;
            document.getElementById("select_branch1").disabled = true;
        }
        var course = statesByCountry[cat4];
        $('#select_course1').empty();
        //$('#select-branch').empty();
        $('#select_branch1').empty();


        if (course)
        {

            $.each(course, function (index, value)
            {
                $('#select_course1').append($('<option>').text(value).attr('value', value));
            });

            //$('#select-branch').empty();
            // $('#select_branch1').empty();
        }
    });


    var branch1 =
    {
        'B.TECH': [/*'All',*/ 'CSE', 'ME', 'EE', 'EC'],
       // All: [],
        MCA: [],

        BCA: [],
        MBA: [],

    };

    $('#select_course1').change(function ()
    {

        var course = $(this).val();
        if (course != 'B.TECH') {
            document.getElementById("select_branch1").disabled = true;
        }
        else {
            document.getElementById("select_branch1").disabled = false;
        }
        var bran = branch1[course];
        $('#select_branch1').empty();
        $('#block').empty();
        if (bran) {
            /* $('#select_branch1').append($('<option>').text(''));*/
            $.each(bran, function (index, value) {
                $('#select_branch1').append($('<option>').text(value).attr('value', value));
            });
        }
    });

    var rati =
    {
        Rating: [1,2,3,4, 5],
        Text: [],


    };

    $('#question-type').change(function ()
    {
        

        var va = $(this).val();
        if (va == 'Text') {
            $('#rating').empty();
            document.getElementById("rating").disabled = true;

        }
        else {
            document.getElementById("rating").disabled = false;
        }
        var ret = rati[va];
        $('#rating').empty();

        if (ret)
        {
           $('#rating').append($('<option>').text('Select Rating'));
            $.each(ret, function (index, value) {
                $('#rating').append($('<option>').text(value).attr('value', value));
            });
        }
    });
    //function show_question_pannel1() {

    //    document.getElementById("open_pannel1").style.display = "block";
    //}
    //function showDropdown1() {
    //    document.getElementById("course-dropdown1").style.display = "block";

    //    var category = document.getElementById("select_category1").value;
    //   // alert('heheheh');

    //    if (category == "Academic") {
    //        //  alert('under academic');

    //        document.getElementById("course-dropdown1").style.display = "block";
    //        document.getElementById("hostel-dropdown1").style.display = "";
    //        document.getElementById("question-pannel1").style.display = "none";
    //        document.getElementById("branch-dropdown1").style.display = "none";
    //    } else if (category == "Hostel") {
    //        // alert('under hostel');
    //        document.getElementById("branch-dropdown1").style.display = "none";
    //        document.getElementById("question-pannel1").style.display = "none";
    //        document.getElementById("course-dropdown1").style.display = "none";
    //        document.getElementById("branch-dropdown1").style.display = "none";
    //        document.getElementById("branch-dropdown1").style.display = "none";
    //    } else {
    //        document.getElementById("course-dropdown1").style.display = "none";
    //        document.getElementById("hostel-dropdown1").style.display = "none";
    //        document.getElementById("question-pannel1").style.display = "none";
    //        document.getElementById("branch-dropdown1").style.display = "none";
    //    }

    //}

    function show_question_pannel()
    {
        //  alert('heheheh');
        document.getElementById("open_pannel").style.display = "block";
    }
    //function showDropdown() {
    //    //alert('drop');
    //    //document.getElementById("course-dropdown").style.display = "none";
    //    //document.getElementById("hostel-dropdown").style.display = "none";
    //   // document.getElementById("question-pannel").style.display = "none";
    //    //document.getElementById("branch-dropdown").style.display = "none";
    //    var category = document.getElementById("select_category").value;
    //    if (category == "Academic") {
    //        //  alert('under academic');
    //        document.getElementById("course-dropdown").style.display = "block";
    //        document.getElementById("hostel-dropdown").style.display = "none";
    //        document.getElementById("question-pannel").style.display = "none";
    //    } else if (category == "Hostel") {
    //        // alert('under hostel');
    //        document.getElementById("question-pannel").style.display = "block";
    //        document.getElementById("course-dropdown").style.display = "none";
    //        document.getElementById("branch-dropdown").style.display = "none";

    //    } else {
    //        document.getElementById("course-dropdown").style.display = "none";
    //        document.getElementById("hostel-dropdown").style.display = "none";
    //        document.getElementById("question-pannel").style.display = "none";
    //    }

    //}
    //function showbranch1() {

    //    var branch = document.getElementById("select_course1").value;
    //    if (branch == "B.TECH") {
    //        document.getElementById("branch-dropdown1").style.display = "block";
    //    }
    //    else {
    //        document.getElementById("branch-dropdown1").style.display = "none";

    //    }
    //}
    function showbranch()
    {
        var branch = document.getElementById("select_course").value;
        document.getElementById("question-pannel").style.display = "block";
        // alert(branch);
        //alert(document.getElementById("branch-dropdown").value);
        if (branch == "B.TECH")
        {
            document.getElementById("branch-dropdown").style.display = "block";
            // document.getElementById("question-pannel").style.display = "block";
        }
        else
        {
            $("#select-branch").val("");
            document.getElementById("branch-dropdown").style.display = "block";
            //document.getElementById("question-pannel").style.display = "none";
        }
    }
    function selecttype()
    {

        var rating = document.getElementById("question-type").value;

        if (rating == "Rating")
        {
            document.getElementById("select-rating").style.display = "block";
        }
        else
        {
            document.getElementById("select-rating").style.display = "block";
        }

    }
    //function showpannel1() {
    //    var course = document.getElementById("select_course").value;
    //    if (course != "B.tech") {
    //        document.getElementById("question-pannel").style.display = "block";
    //    }
    //    else {
    //        document.getElementById("question-pannel").style.display = "none";
    //    }

    //}
    function showpannel()
    {
        var course = document.getElementById("select_course").value;
        if (course != "B.TECH")
        {
            document.getElementById("question-pannel").style.display = "block";
        }
        //else {
        //    document.getElementById("question-pannel").style.display = "none";
        //}

    }
    function bybranch()
    {
        var branch = document.getElementById("select-branch").value;

        if (branch != "")
        {
            document.getElementById("question-pannel").style.display = "block";
        }
        else
        {
            document.getElementById("question-pannel").style.display = "block";
        }
    }
</script>

















